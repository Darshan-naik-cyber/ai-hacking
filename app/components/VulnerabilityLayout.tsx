"use client";

import { useState } from "react";
import { cn } from "@/lib/utils";
import { BookOpen, Play, ShieldCheck } from "lucide-react";

interface VulnerabilityLayoutProps {
    title: string;
    description: string;
    conceptContent: React.ReactNode;
    demoContent: React.ReactNode;
    mitigationContent: React.ReactNode;
}

type Tab = "concept" | "demo" | "mitigation";

export function VulnerabilityLayout({
    title,
    description,
    conceptContent,
    demoContent,
    mitigationContent,
}: VulnerabilityLayoutProps) {
    const [activeTab, setActiveTab] = useState<Tab>("concept");

    return (
        <div className="flex h-full flex-col bg-black text-zinc-100">
            {/* Header */}
            <div className="border-b border-zinc-800 bg-zinc-950 px-8 py-6">
                <h1 className="text-3xl font-bold text-zinc-100">{title}</h1>
                <p className="mt-2 text-lg text-zinc-400">{description}</p>
            </div>

            {/* Tabs */}
            <div className="flex border-b border-zinc-800 bg-zinc-900/50 px-8">
                <button
                    onClick={() => setActiveTab("concept")}
                    className={cn(
                        "flex items-center gap-2 border-b-2 px-6 py-4 text-sm font-medium transition-colors",
                        activeTab === "concept"
                            ? "border-emerald-500 text-emerald-400"
                            : "border-transparent text-zinc-400 hover:text-zinc-200"
                    )}
                >
                    <BookOpen className="h-4 w-4" />
                    Concept
                </button>
                <button
                    onClick={() => setActiveTab("demo")}
                    className={cn(
                        "flex items-center gap-2 border-b-2 px-6 py-4 text-sm font-medium transition-colors",
                        activeTab === "demo"
                            ? "border-blue-500 text-blue-400"
                            : "border-transparent text-zinc-400 hover:text-zinc-200"
                    )}
                >
                    <Play className="h-4 w-4" />
                    Interactive Demo
                </button>
                <button
                    onClick={() => setActiveTab("mitigation")}
                    className={cn(
                        "flex items-center gap-2 border-b-2 px-6 py-4 text-sm font-medium transition-colors",
                        activeTab === "mitigation"
                            ? "border-purple-500 text-purple-400"
                            : "border-transparent text-zinc-400 hover:text-zinc-200"
                    )}
                >
                    <ShieldCheck className="h-4 w-4" />
                    Mitigation
                </button>
            </div>

            {/* Content */}
            <div className="flex-1 overflow-y-auto p-8">
                <div className="mx-auto max-w-5xl">
                    {activeTab === "concept" && (
                        <div className="animate-in fade-in slide-in-from-bottom-4 duration-500">
                            {conceptContent}
                        </div>
                    )}
                    {activeTab === "demo" && (
                        <div className="animate-in fade-in slide-in-from-bottom-4 duration-500">
                            {demoContent}
                        </div>
                    )}
                    {activeTab === "mitigation" && (
                        <div className="animate-in fade-in slide-in-from-bottom-4 duration-500">
                            {mitigationContent}
                        </div>
                    )}
                </div>
            </div>
        </div>
    );
}
